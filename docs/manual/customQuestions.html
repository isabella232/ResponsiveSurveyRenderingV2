<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Responsive Rendering</title>
   <link rel="shortcut icon" type="image/x-icon" href="./image/favicon.ico">
   <link type="text/css" rel="stylesheet" href="css/bootstrap.css">
   <link type="text/css" rel="stylesheet" href="css/style.css">
   <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
   <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Responsive Rendering Api"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Responsive Rendering"><meta property="twitter:description" content="Responsive Rendering Api"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<div class="navbar navbar-default navbar-fixed-top">
	<div>
		<div class="navbar-header">
			 <a class="navbar-brand" href="./index.html">
				<img src="./image/brand_logo.png" style="width:30px;">
			</a>
			<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>
		<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			<li><a href="./index.html" data-ice="manualHeaderLink"> Articles and Guides </a></li>
			<li><a href="identifiers.html" data-ice="manualHeaderLink">Library <div class="label label-default">API</div></a></li>
			<li><a href="https://github.com/Confirmit/ResponsiveRendering"><img width="20px" src="./image/github.png"></a></li>
		</ul>
            <div class="pull-right">
                 <div class="search-box">
					<span>
						<img src="./image/search.png">
						<span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
					</span>
					<ul class="search-result"></ul>
				</div>
            </div>
	</div>
	</div>
</div>

<nav class="navigation" data-ice="nav">
<div class="manual-toc-root">
  
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html" data-ice="link">Confirmit Responsive Survey Rendering documentation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#what-is-it-" data-ice="link">What is it?</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#how-to-start-using" data-ice="link">How to start using</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#key-concepts" data-ice="link">Key concepts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#launch-validation" data-ice="link">Launch validation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#browser-support" data-ice="link">Browser support</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#further-reading" data-ice="link">Further reading</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#testlab-survey-with-examples---a-href--https---author-testlab-firmglobal-net-surveydesigner-p1010101--p1010101--a-" data-ice="link">Testlab survey with examples: p1010101</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html" data-ice="link">How to do styling</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#style-bundle-customization" data-ice="link">Style bundle customization</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#custom-css" data-ice="link">Custom CSS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#totally-custom-css" data-ice="link">Totally custom CSS</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/stylebundle.html"><a class="manual-toc-href" href="manual/stylebundle.html" data-ice="link">Style Bundle</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html" data-ice="link">How to do scripting</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#where-to-put-code" data-ice="link">Where to put code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#how-to-send-data-to-server" data-ice="link">How to send data to server</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#client-side-events" data-ice="link">Client-side events</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#changeevent" data-ice="link">ChangeEvent</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#validationevent" data-ice="link">ValidationEvent</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#validationcompleteevent" data-ice="link">ValidationCompleteEvent</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#server-side-piping" data-ice="link">Server side piping</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#custom-question-experience" data-ice="link">Custom question experience</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#custom-jquery-slider-example" data-ice="link">Custom jQuery slider example</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html" data-ice="link">Augmenting Confirmit questions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#api-spec" data-ice="link">API spec</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#examples" data-ice="link">Examples</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#question-level" data-ice="link">Question level</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#question-type-level" data-ice="link">Question type level</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#side-by-side-views" data-ice="link">Side by side views</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#inherit-from-default-views" data-ice="link">Inherit from default views</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#replace-default-view-with-custom" data-ice="link">Replace default view with custom</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html" data-ice="link">Custom questions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#single-slider" data-ice="link">Single slider</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#grid-slider" data-ice="link">Grid slider</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#grid-slider-re-rendered" data-ice="link">Grid slider re-rendered</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#multi-accordion-with-bootstrap" data-ice="link">Multi accordion with bootstrap</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#custom-factory-example" data-ice="link">Custom factory example</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html" data-ice="link">Useful style and code snippets</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#background-image" data-ice="link">Background image</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#solid-picture" data-ice="link">Solid picture</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#repeating-picture" data-ice="link">Repeating picture</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html" data-ice="link">What&apos;s changed in survey layouts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#rendering-version" data-ice="link">Rendering version</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#new-in-survey-layouts" data-ice="link">New in survey layouts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#removed-from-survey-layouts" data-ice="link">Removed from survey layouts</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html" data-ice="link">Confirmit Responsive Rendering versioning</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#rendering-version" data-ice="link">Rendering Version</a></li>
</ul>
  </div>
</div></nav>
<div class="content" data-ice="content">
<div class="github-markdown" data-ice="content"><h1 id="custom-questions">Custom questions</h1><h2 id="overview">Overview</h2><p>In this article we&apos;ll create a couple of custom question experiences using external js libraries (jQueryUI, bootstrap), and describe a way to group them together generically.<br>We use a naming convention to distinguish between public and private methods and properties, use of private methods and properties is not supported. <strong>Methods and properties names starting with &#x201C;_&#x201D; are private and may be changed at any time without warning</strong> which could lead to unexpected behaviour or could prevent your survey from working.  </p>
<h2 id="single-slider">Single slider</h2><h3 id="overview">Overview</h3><p>In that section we&apos;ll implement basic custom slider control using jQueryUI. Default Confirmit markup will be disabled, and instead we will create a jQueryUI slider bound to the question model.
This example can be used with single questions.</p>
<h3 id="implementation">Implementation</h3><p>Set &apos;disable default rendering&apos; on the question skin - default markup won&apos;t be used in that example so it can be disabled.  </p>
<p>Add the jQuery and jQueryUI js files to the question theme as external js files.</p>
<pre><code class="lang-log"><code class="source-code prettyprint">https://code.jquery.com/jquery-3.2.1.min.js, 
https://code.jquery.com/ui/1.12.1/jquery-ui.min.js  </code>
</code></pre>
<p>Add the jQueryUI css file to the question theme as an external css file.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css</code>
</code></pre><p>Code to add to the JavaScript section:  </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">$(function() {
    var container = $(&apos;#&apos; + currentQuestion.id);

    var sliderContainer = $(&apos;&lt;div class=&quot;single-slider&quot; style=&quot;max-width: 300px; margin: 20px;&quot;&gt;&lt;/div&gt;&apos;);
    container.append(sliderContainer);

    sliderContainer.slider({
        value: currentQuestion.value,
        min: 1,
        max: currentQuestion.answers.length,
        change: function( event, ui ) {
            currentQuestion.setValue(ui.value);
        }
    });

    currentQuestion.changeEvent.on(() =&gt; {
        sliderContainer.slider(&quot;value&quot;, currentQuestion.value);
        console.log(&apos;Single slider(&apos; + currentQuestion.id + &apos;) changed: value &apos; + currentQuestion.value + &apos;, other &apos; + currentQuestion.otherValue);
    });
});</code>
</code></pre>
<h2 id="grid-slider">Grid slider</h2><h3 id="overview">Overview</h3><p>It is also possible to adjust part of the default question markup. Here we will adjust the grid question to display sliders instead of radio buttons.
This example can be used with grid questions.</p>
<h3 id="implementation">Implementation</h3><p>Add the jQuery and jQueryUI js files to the question theme as external js files.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/jquery-1.12.4.js, 
https://code.jquery.com/ui/1.12.1/jquery-ui.js</code>
</code></pre><p>Add the jQueryUI css file to the question theme as an external css file.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css</code>
</code></pre><p>Code to add to the JavaScript section:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">class SliderSimpleGridQuestionView {
    constructor(currentQuestion) {
        this.question = currentQuestion;
        this.init();
    }

    init(){
        this.hideScales();
        this.render();
        this.question.changeEvent.on(this.onQuestionChange.bind(this));
    }

    getSliderId(answerCode) {
        return &apos;slider_&apos; + this.question.id + &apos;_&apos; + answerCode;
    }

    hideScales() {
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer__scale&apos;).hide();
    }

    render(){
        this.question.answers.forEach(answer =&gt; {
            const slider = $(&apos;&lt;div class=&quot;slider-grid__slider&quot; id=&quot;&apos; + this.getSliderId(answer.code) + &apos;&quot;&gt;&lt;/div&gt;&apos;);
            const rowId = this.question.id + &apos;_&apos; + answer.code;
            slider.appendTo(&apos;#&apos; + rowId + &apos; .cf-grid-layout__row-control&apos;);

            $( &apos;#&apos; + this.getSliderId(answer.code) ).slider({
                value: 0,
                min: 0,
                max: this.question.scales.length- 1,
                step: 1,
                change: this.onSliderChange.bind(this, answer.code)
            });
        });

        $(&apos;#&apos; + this.question.id).find(&apos;.cf-grid&apos;).css(&apos;overflow&apos;, &apos;initial&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer&apos;).css(&apos;margin-bottom&apos;, &apos;15px&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer__text&apos;).css(&apos;margin-top&apos;, &apos;0&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer__control&apos;).css(&apos;align-self&apos;, &apos;center&apos;).css(&apos;max-width&apos;, &apos;600px&apos;).css(&apos;flex-grow&apos;, &apos;1&apos;);
    }

    onSliderChange(answerCode, event, data){
        const answerValue = this.question.scales[data.value].code;
        this.question.setValue(answerCode, answerValue);
    }

    onQuestionChange(model){
        model.changes.values.forEach(answerCode =&gt; {
            let sliderId = this.getSliderId(answerCode);
            let value = this.question.scales.findIndex(scale =&gt; scale.code == this.question.values[answerCode]);
            $( &apos;#&apos; + sliderId ).slider(&quot;value&quot;, value);
        });
    }
}

new SliderSimpleGridQuestionView(currentQuestion);</code>
</code></pre>
<h2 id="grid-slider-re-rendered">Grid slider re-rendered</h2><h3 id="overview">Overview</h3><p>The previous example could also be implemented in a different way - by disabling the default markup and creating it manually.
This example can be used with grid questions.</p>
<h3 id="implementation">Implementation</h3><p>Set &apos;Disable default rendering&apos; in the question skin&apos;s properties.<br>Add the jQuery and jQueryUI js files to the question theme as external js files.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/jquery-1.12.4.js, https://code.jquery.com/ui/1.12.1/jquery-ui.js</code>
</code></pre><p>Add the jQueryUI css file to the question theme as an external css file.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css</code>
</code></pre><p>Code to add to the JavaScript section:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">class SliderGridQuestionView {
    constructor(currentQuestion) {
        this.question = currentQuestion;
        this.init();
    }

    init(){
        this.render();
        this.initValues();
        this.subscribeToQuestion();
    }

    getSliderId(answerCode) {
        return &apos;slider_&apos; + this.question.id + &apos;_&apos; + answerCode;
    }

    render() {
        $(&apos;&lt;div class=&quot;cf-question__text&quot;&gt;&apos; + this.question.text + &apos;&lt;/div&gt;&apos;).appendTo(&apos;#&apos; + this.question.id);
        $(&apos;&lt;div class=&quot;cf-question__instruction&quot;&gt;&apos; + this.question.instruction + &apos;&lt;/div&gt;&apos;).appendTo(&apos;#&apos; + this.question.id);
        this.renderContent();
    }

    initValues(){
        if(Object.keys(this.question.values).length === 0) {
            return;
        }

        Object.keys(this.question.values).forEach( answerCode =&gt; {
            const sliderValue = this.question.scales.findIndex(scale =&gt; scale.code == this.question.values[answerCode]);
            $(&apos;#&apos; + this.getSliderId(answerCode)).slider(&quot;value&quot;, sliderValue);
        });
    }

    subscribeToQuestion(){
        this.question.changeEvent.on(this.onQuestionChange.bind(this));
        this.question.validationCompleteEvent.on(this.onQuestionValidationComplete.bind(this));
    }

    renderContent(){
        $(&apos;&lt;div class=&quot;cf-question__content&quot;&gt;&apos;+
            &apos;&lt;div class=&quot;cf-grid cf-grid-layout&quot;&gt;&lt;/div&gt;&apos;+
          &apos;&lt;/div&gt;&apos;).appendTo(&apos;#&apos; + this.question.id);
        this.renderLabelPanel();
        this.renderRows();

        $(&apos;.grid&apos;).css(&apos;overflow&apos;,&apos;initial&apos;);
    }

    renderLabelPanel(){
        const labelPanel=$(&apos;&lt;div class=&quot;cf-grid-answer cf-grid-answer--fake-for-panel cf-grid-layout__row&quot;&gt;&apos; +
            &apos;&lt;div class=&quot;cf-grid-answer__text cf-grid-layout__row-text&quot;&gt;&lt;/div&gt;&apos; +
            &apos;&lt;div class=&quot;cf-grid-answer__control cf-grid-layout__row-control  slider-grid__row-control&quot;&gt;&apos; +
            &apos;&lt;/div&gt;&apos; +
            &apos;&lt;/div&gt;&apos;);
        labelPanel.appendTo(&apos;#&apos; + this.question.id + &apos; .cf-grid-layout&apos;);

        const labels = $(&apos;&lt;div class=&quot;cf-grid-answer__labels&quot;&gt;&lt;/div&gt;&apos;);
        this.question.scales.forEach(scale =&gt; {
            $(&apos;&lt;div class=&quot;cf-grid-answer__label&quot;&gt;&apos; + scale.text + &apos;&lt;/div&gt;&apos;).appendTo(labels);
        });
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer--fake-for-panel .cf-grid-layout__row-control&apos;).append(labels);
    }

    renderRows(){
        this.question.answers.forEach(answer =&gt; {
            const answerId = this.question.id + &apos;_&apos; + answer.code;

            const row = $(&apos;&lt;div class=&quot;cf-grid-answer cf-grid-layout__row&quot; id=&quot;&apos; + answerId + &apos;&quot;&gt;&apos; +
                &apos;&lt;div class=&quot;cf-grid-layout__row-text&quot;&gt;&apos; +
                &apos;&lt;div class=&quot;cf-grid-answer__text&quot; id=&quot;&apos; + answerId + &apos;_text&quot;&gt;&apos; + answer.text + &apos;&lt;/div&gt;&apos; +
                &apos;&lt;/div&gt;&apos; +
                &apos;&lt;div class=&quot;cf-grid-answer__control cf-grid-layout__row-control&quot;&gt;&lt;/div&gt;&apos; +
                &apos;&lt;/div&gt;&apos;);
            row.appendTo(&apos;#&apos; + this.question.id + &apos; .cf-grid-layout&apos;);

            const sliderId = this.getSliderId(answer.code);
            const slider = $(&apos;&lt;div class=&quot;slider-grid__slider&quot; id=&quot;&apos; + sliderId + &apos;&quot;&gt;&lt;/div&gt;&apos;);
            slider.appendTo(&apos;#&apos; + answerId + &apos; .cf-grid-answer__control&apos;);

            $( &apos;#&apos; + sliderId ).slider({
                value: 0,
                min: 0,
                max: this.question.scales.length- 1,
                step: 1,
                change: this.onSliderChange.bind(this, answer.code)
            });
        });

        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer&apos;).css(&apos;margin-bottom&apos;, &apos;15px&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer__text&apos;).css(&apos;margin-top&apos;, &apos;0&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-grid-answer__control&apos;).css(&apos;align-self&apos;, &apos;center&apos;).css(&apos;max-width&apos;, &apos;600px&apos;).css(&apos;flex-grow&apos;, &apos;1&apos;);
    }

    renderErrors(){
        $(&apos;&lt;div class=&quot;cf-question__error cf-error-block cf-error-block--bottom&quot;&gt;&apos; +
            &apos;&lt;ul class=&quot;cf-error-list&quot;&gt;&lt;/ul&gt;&apos; +
            &apos;&lt;/div&gt;&apos;).insertAfter(&apos;#&apos; + this.question.id + &apos; .cf-question__instruction&apos;);
    }

    onSliderChange(answerCode, event, data){
        const answerValue = this.question.scales[data.value].code;
        this.question.setValue(answerCode, answerValue);
    }

    onQuestionChange(model) {
        model.changes.values.forEach(answerCode =&gt; {
            let sliderValue = this.question.scales.findIndex(scale =&gt; scale.code == this.question.values[answerCode]);
            $(&apos;#&apos; + this.getSliderId(answerCode)).slider(&quot;value&quot;, sliderValue);
        });
    }

    onQuestionValidationComplete(validationResult) {
        $(&apos;#&apos; + this.question.id).removeClass(&quot;cf-question--error&quot;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-error-block&apos;).remove();

        const errors = [];

        validationResult.answerValidationResults.forEach(answerValRes =&gt; {
            answerValRes.errors.forEach(error =&gt; {
                errors.push((&apos;&lt;li class=&quot;cf-error-list__item&quot;&gt;&apos; + error.message + &apos;&lt;/li&gt;&apos;));
            });
        });

        validationResult.errors.forEach(error =&gt; {
            errors.push((&apos;&lt;li class=&quot;cf-error-list__item&quot;&gt;&apos; + error.message + &apos;&lt;/li&gt;&apos;));
        });

        if (errors.length === 0) {
            return;
        }

        this.renderErrors();
        errors.forEach(error =&gt; {
            $(&apos;#&apos; + this.question.id + &apos; .cf-error-list&apos;).append(error);
        });
        $(&apos;#&apos; + this.question.id).addClass(&quot;cf-question--error&quot;);
    }
}

new SliderGridQuestionView(currentQuestion);</code>
</code></pre>
<h2 id="multi-accordion-with-bootstrap">Multi accordion with bootstrap</h2><h3 id="overview">Overview</h3><p>That section demonstrates how to create a multi question with expandable groups.
This example can be used with multi questions.</p>
<h3 id="implementation">Implementation</h3><p>Set &apos;Disable default rendering&apos; in the question skin&apos;s properties.
Add the jQuery and Bootstrap js files to the question theme as external js files.</p>
<pre><code><code class="source-code prettyprint">https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css</code>
</code></pre><p>Add the Bootstrap css file to the question theme as an external css file.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/jquery-3.2.1.slim.min.js,
https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js,
https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js</code>
</code></pre><p>Code to add to the JavaScript section:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">class AccordionMultiQuestionView {
    constructor(currentQuestion) {
        this.question = currentQuestion;
        this.init();
    }

    init(){
        this.render();
        this.initValues();
        this.subscribeToQuestion();
    }

    render() {
        const questionId = &apos;#&apos; + this.question.id;
        $(&apos;&lt;div class=&quot;cf-question__text&quot;&gt;&apos; + this.question.text + &apos;&lt;/div&gt;&apos;).appendTo(questionId);
        $(&apos;&lt;div class=&quot;cf-question__instruction&quot;&gt;&apos; + this.question.instruction + &apos;&lt;/div&gt;&apos;).appendTo(questionId);
        $(&apos;&lt;div class=&quot;cf-question__content&quot;&gt;&lt;/div&gt;&apos;).appendTo(questionId);
        this.renderAccordion();
    }

    initValues() {
        this.question.values.forEach(value =&gt; {
            const id = this.question.id + &apos;_&apos; + value;
        const className = &apos;cf-multi-answer--selected&apos;;
        $(&apos;#&apos; + id).addClass(className);
    });

        if (Object.keys(this.question.otherValues).length &gt; 0) {
            return;
        }
        for (let index in this.question.otherValues) {
            const id = this.question.id + &apos;_&apos; + index + &apos;_other&apos;;
            $(&apos;#&apos; + id)[0].value = this.question.otherValues[index];
        }
    }

    subscribeToQuestion(){
        this.question.changeEvent.on(this.onQuestionChange.bind(this));
        this.question.validationCompleteEvent.on(this.onQuestionValidationComplete.bind(this));
    }

    renderAccordion(){
        const accordion = $(&apos;&lt;div class=&quot;accordion cf-list&quot;&gt;&lt;/div&gt;&apos;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-question__content&apos;).append(accordion);

        let container = null;
        this.question.answers.forEach(answer =&gt; {
            const newAnswer = this.createAnswer(answer);
            if (answer.group != null) {
                container = null;
                this.getGroupNode(answer.group).find(&apos;.card-body&apos;).append(newAnswer);
            }
            else {
                if(!container){
                    container = $(&apos;&lt;div class=&quot;my-2 margin-left&quot;&gt;&lt;/div&gt;&apos;);
                    container.appendTo(accordion);
                }
                newAnswer.appendTo(container);
            }
        })
    }

    getGroupNode(group){
        const groupId = this.question.id + &apos;_&apos; + group.code;
        let groupNode = $(&apos;#&apos; + groupId);
        if(groupNode.length === 0){
            groupNode = this.createGroup(group);
        }

        return groupNode;
    }

    createGroup(group){
        const groupId = this.question.id + &apos;_&apos; + group.code;
        const groupElement = $(&apos;&lt;div class=&quot;card my-2&quot;&gt;&lt;/div&gt;&apos;);
        const header = $(&apos;&lt;div class=&quot;card-header&quot;&gt;&apos; +
            &apos;&lt;div class=&quot;container-fluid&quot; data-toggle=&quot;collapse&quot; href=&quot;#&apos; + groupId + &apos;&quot;&gt;&apos; +
            group.title +
            &apos;&lt;/div&gt;&apos; +
            &apos;&lt;/div&gt;&apos;);
        const body = $(&apos;&lt;div id=&quot;&apos; + groupId + &apos;&quot; class=&quot;collapse&quot;&gt;&apos; +
            &apos;&lt;div class=&quot;card-body&quot;&gt;&lt;/div&gt;&apos; +
            &apos;&lt;/div&gt;&apos;);

        header.find(&apos;.container-fluid&apos;).on(&apos;click&apos;, function(){
            const state = !$(this.parentElement).hasClass(&apos;card-header--closed&apos;);
            $(this.parentElement).toggleClass(&apos;card-header--closed&apos;, state);
        });

        groupElement.append(header, body);
        $(&apos;#&apos; + this.question.id + &apos; .accordion&apos;).append(groupElement);

        return groupElement;
    }

    createAnswer(answer){
        const answerId = this.question.id + &apos;_&apos; + answer.code;
        const newAnswer = $(&apos;&lt;div class=&quot;cf-list__item cf-multi-answer&quot; id=&quot;&apos; + answerId + &apos;&quot;&gt;&lt;/div&gt;&apos;);

        if(answer.isExclusive){
            newAnswer.addClass(&quot;cf-multi-answer--exclusive&quot;);
        }

        if(answer.isOther){
            const inputId =this.question.id + &apos;_&apos; + answer.code + &apos;_other&apos;;
            const input = $(&apos;&lt;input id=&quot;&apos; + inputId + &apos;&quot; type=&quot;text&quot; class=&quot;cf-multi-answer__other-input cf-text-box&quot; value=&quot;&quot; placeholder=&quot;Other&quot;&gt;&apos;);
            newAnswer.append(input);

            input.on(&apos;input&apos;, this.onAnswerInput.bind(this, answer.code, inputId));
            input.on(&apos;click&apos;, e =&gt; e.stopPropagation());
        }
        else{
            $(&apos;&lt;div class=&quot;cf-multi-answer__text&quot; id=&quot;&apos; + answerId + &apos;_text&quot;&gt;&apos;+ answer.text + &apos;&lt;/div&gt;&apos;).appendTo(newAnswer);
        }
        newAnswer.on(&apos;click&apos;, this.onAnswerClick.bind(this, answer.code));

        return newAnswer;
    }

    renderErrors(errors){
        $(&apos;#&apos; + this.question.id).removeClass(&quot;cf-question--error&quot;);
        $(&apos;#&apos; + this.question.id + &apos; .cf-error-block&apos;).remove();

        if (errors.length === 0) {
            return;
        }

        const errorList = $(&apos;&lt;div class=&quot;cf-question__error cf-error-block cf-error-block--bottom&quot;&gt;&apos; +
            &apos;&lt;ul class=&quot;cf-error-list&quot;&gt;&lt;/ul&gt;&apos; +
            &apos;&lt;/div&gt;&apos;);
        errorList.insertAfter(&apos;#&apos; + this.question.id + &apos; .cf-question__instruction&apos;);

        errors.forEach(error =&gt; {
        $(&apos;&lt;li class=&quot;cf-error-list__item&quot;&gt;&apos; + error + &apos;&lt;/li&gt;&apos;).appendTo(errorList);
        });

        $(&apos;#&apos; + this.question.id).addClass(&quot;cf-question--error&quot;);
    }

    onAnswerInput(answerCode, inputId){
        this.question.setValue(answerCode, &apos;true&apos;);
        const value = $(&apos;#&apos; + inputId)[0].value;
        this.question.setOtherValue(answerCode, value);
    }

    onAnswerClick(answerCode){
        const value = this.question.values.indexOf(answerCode) &lt;= -1;
        this.question.setValue(answerCode, value);
    }

    onQuestionChange(model){
        if(model.changes.values) {
            model.changes.values.forEach(value =&gt; {
                let id = this.question.id + &apos;_&apos; + value;
                let className = &apos;cf-multi-answer--selected&apos;;
                if (this.question.values.indexOf(value) &gt; -1) {
                    $(&apos;#&apos; + id).addClass(className);
                }
                else {
                    $(&apos;#&apos; + id).removeClass(className);
                }
            });
        }

        if(model.changes.OtherValues) {
            model.changes.OtherValues.forEach(value =&gt; {
                let id = this.question.id + &apos;_&apos; + value;
                let className = &apos;cf-multi-answer--selected&apos;;
                if (this.question.values.indexOf(value) &gt; -1) {
                    $(&apos;#&apos; + id).addClass(className);
                }
                else {
                    $(&apos;#&apos; + id).removeClass(className);
                }
            });
        }
    }

    onQuestionValidationComplete(validationResult) {
        let errors = [];

        validationResult.answerValidationResults.forEach(answerValRes =&gt; {
            answerValRes.errors.forEach(error =&gt; {
                errors.push(error.message);
            });
        });

        validationResult.errors.forEach(error =&gt; {
            errors.push(error.message);
        });

        this.renderErrors(errors);

    }
}

new AccordionMultiQuestionView(currentQuestion);</code>
</code></pre>
<p>Styles to add to the Custom CSS section of the question theme: </p>
<pre><code class="lang-css"><code class="source-code prettyprint">margin-left {
    margin-left: 1.3rem!important;
}

.card-header{
    line-height: 1.8em;
    min-height: 1.8em;
    background-size: 1.8em;
    background-repeat: no-repeat;
    background-position: 5px center;
    cursor: pointer;
    background-image: url(&quot;data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2232px%22%20height%3D%2232px%22%20viewBox%3D%220%200%20306%20306%22%3E%3Cpolygon%20points%3D%22270.3%2C58.65%20153%2C175.95%2035.7%2C58.65%200%2C94.35%20153%2C247.35%20306%2C94.35%22%20fill%3D%22%23bbbbbb%22%2F%3E%3C%2Fsvg%3E&quot;);
}

.card-header--closed{
  line-height: 1.8em;
    min-height: 1.8em;
    background-size: 1.8em;
    background-repeat: no-repeat;
    background-position: 5px center;
    cursor: pointer;
    background-image: url(&quot;data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2232px%22%20height%3D%2232px%22%20viewBox%3D%220%200%20306%20306%22%3E%3Cpolygon%20points%3D%2294.35%2C0%2058.65%2C35.7%20175.95%2C153%2058.65%2C270.3%2094.35%2C306%20247.35%2C153%22%20fill%3D%22%23bbbbbb%22%2F%3E%3C%2Fsvg%3E&quot;);
}</code>
</code></pre>
<h2 id="custom-factory-example">Custom factory example</h2><p>Once you&apos;ve created some custom question experiences, you might want to pack it together. One way to do this is to use a factory class to instantiate the proper custom question view.</p>
<p>Question views are taken from the previous examples.<br>Don&apos;t forget to set &apos;Disable default rendering&apos; in the question skin&apos;s properties.<br>Code to add to the JavaScript section:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">class QuestionViewFactory {
    create(question) {
        if (question.type == &apos;Multi&apos;) {
            return new AccordionMultiQuestionView(question);
        }

        if (question.type == &apos;Grid&apos;) {
            return new SliderGridQuestionView(question);
        }
    }
}

let factory = new QuestionViewFactory();
factory.create(currentQuestion);</code>
</code></pre>
</div>
</div>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>

<script src="script/jquery-3.2.1.min.js"></script>
<script src="script/bootstrap.min.js"></script>
</body>
</html>

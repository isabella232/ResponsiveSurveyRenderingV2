<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Responsive Rendering</title>
   <link rel="shortcut icon" type="image/x-icon" href="./image/favicon.ico">
   <link type="text/css" rel="stylesheet" href="css/bootstrap.css">
   <link type="text/css" rel="stylesheet" href="css/style.css">
   <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
   <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Responsive Rendering Api"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Responsive Rendering"><meta property="twitter:description" content="Responsive Rendering Api"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<div class="navbar navbar-default navbar-fixed-top">
	<div>
		<div class="navbar-header">
			 <a class="navbar-brand" href="./index.html">
				<img src="./image/brand_logo.png" style="width:30px;">
			</a>
			<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>
		<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			<li><a href="./index.html" data-ice="manualHeaderLink"> Articles and Guides </a></li>
			<li><a href="identifiers.html" data-ice="manualHeaderLink">Library <div class="label label-default">API</div></a></li>
			<li><a href="https://github.com/Confirmit/ResponsiveSurveyRenderingV2"><img width="20px" src="./image/github.png"></a></li>
		</ul>
            <div class="pull-right">
                 <div class="search-box">
					<span>
						<img src="./image/search.png">
						<span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
					</span>
					<ul class="search-result"></ul>
				</div>
            </div>
	</div>
	</div>
</div>

<nav class="navigation" data-ice="nav">
<div class="manual-toc-root">
  
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html" data-ice="link">Confirmit Responsive Survey Rendering V2 documentation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#what-is-it-" data-ice="link">What is it?</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#how-to-start-using" data-ice="link">How to start using</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#key-concepts" data-ice="link">Key concepts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#launch-validation" data-ice="link">Launch validation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#browser-support" data-ice="link">Browser support</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#further-reading" data-ice="link">Further reading</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/index.html"><a class="manual-toc-href" href="manual/index.html#testlab-survey-with-examples---a-href--https---author-testlab-firmglobal-net-surveydesigner-p1010101--p1010101--a-" data-ice="link">Testlab survey with examples: p1010101</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html" data-ice="link">How to do styling</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#style-bundle-customization" data-ice="link">Style bundle customization</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#custom-css" data-ice="link">Custom CSS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/styling.html"><a class="manual-toc-href" href="manual/styling.html#totally-custom-css" data-ice="link">Totally custom CSS</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/stylebundle.html"><a class="manual-toc-href" href="manual/stylebundle.html" data-ice="link">Style Bundle</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html" data-ice="link">How to do scripting</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#where-to-put-code" data-ice="link">Where to put code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#how-to-send-data-to-server" data-ice="link">How to send data to server</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#client-side-events" data-ice="link">Client-side events</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#changeevent" data-ice="link">ChangeEvent</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#validationevent" data-ice="link">ValidationEvent</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#validationcompleteevent" data-ice="link">ValidationCompleteEvent</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#server-side-piping" data-ice="link">Server side piping</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#custom-question-experience" data-ice="link">Custom question experience</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/scripting.html"><a class="manual-toc-href" href="manual/scripting.html#custom-jquery-slider-example" data-ice="link">Custom jQuery slider example</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html" data-ice="link">Augmenting Confirmit questions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#api-spec" data-ice="link">API spec</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#examples" data-ice="link">Examples</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#question-level" data-ice="link">Question level</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#question-type-level" data-ice="link">Question type level</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#side-by-side-views" data-ice="link">Side by side views</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#inherit-from-default-views" data-ice="link">Inherit from default views</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#replace-default-view-with-custom" data-ice="link">Replace default view with custom</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customViews.html"><a class="manual-toc-href" href="manual/customViews.html#detach-question-views" data-ice="link">Detach question views</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html" data-ice="link">Custom questions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#disabling-default-rendering" data-ice="link">Disabling default rendering</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#where-to-put-code" data-ice="link">Where to put code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#single-slider" data-ice="link">Single slider</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#grid-slider" data-ice="link">Grid slider</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#grid-slider-re-rendered" data-ice="link">Grid slider re-rendered</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#multi-accordion-with-bootstrap" data-ice="link">Multi accordion with bootstrap</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#implementation" data-ice="link">Implementation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/customQuestions.html"><a class="manual-toc-href" href="manual/customQuestions.html#custom-factory-example" data-ice="link">Custom factory example</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html" data-ice="link">Useful style and code snippets</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#background-image" data-ice="link">Background image</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#solid-picture" data-ice="link">Solid picture</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/cheatsheet.html"><a class="manual-toc-href" href="manual/cheatsheet.html#repeating-picture" data-ice="link">Repeating picture</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html" data-ice="link">What&apos;s changed in survey layouts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#rendering-version" data-ice="link">Rendering version</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#new-in-survey-layouts" data-ice="link">New in survey layouts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/layout.html"><a class="manual-toc-href" href="manual/layout.html#removed-from-survey-layouts" data-ice="link">Removed from survey layouts</a></li>
</ul>
  </div>
<div data-ice="manual" class="nav-anchor">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html" data-ice="link">Confirmit Responsive Rendering versioning</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#what-is-rendering-version-" data-ice="link">What is Rendering Version?</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#existing-versions" data-ice="link">Existing versions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#key-differences-between-v2--current-documentation--and-v1-versions" data-ice="link">Key differences between V2 (current documentation) and V1 versions</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#user-experience" data-ice="link">User experience</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#markup-changes" data-ice="link">Markup changes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/versioning.html"><a class="manual-toc-href" href="manual/versioning.html#responsive-client-api--models-layer-" data-ice="link">Responsive client API (models layer)</a></li>
</ul>
  </div>
</div></nav>
<div class="content" data-ice="content">
<div class="github-markdown" data-ice="content"><h1 id="how-to-do-scripting">How to do scripting</h1><h2 id="overview">Overview</h2><p>Client-side API root object is available as <code>window.Confirmit</code><br>To get current survey page questions use <code>window.Confirmit.page.questions</code><br>To navigate use <code>window.Confirmit.page.next</code> or <code>window.Confirmit.page.back</code><br>We use a naming convention to distinguish between public and private methods and properties, use of private methods and properties is not supported. <strong>Methods and properties names starting with &#x201C;_&#x201D; are private and may be changed at any time without warning</strong> which could lead to unexpected behaviour or could prevent your survey from working.<br>For more info see <a href="./manual/./identifiers.html">Client-side API reference</a>  </p>
<h2 id="where-to-put-code">Where to put code</h2><p>Custom JavaScript should be placed in JavaScript section of question, question skin or theme.<br>Use question level JavaScript to customize individual question, question skin level to customize group of questions and theme level to customize survey page experience.<br>currentQuestion variable is available to you in question and question skin JavaScript section. It hold a reference to current question object model.<br>For example, this code can be placed in JavaScript section to log question text to console:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">console.log(currentQuestion.text)</code>
</code></pre>
<h2 id="how-to-send-data-to-server">How to send data to server</h2><p>Update question model using setValue method.<br>If you have &apos;disable default rendering&apos; on question skin - just do same, update question model, data will be sent to server automatically.</p>
<h2 id="client-side-events">Client-side events</h2><h3 id="changeevent">ChangeEvent</h3><p>Question model has changeEvent. It can be used like this  </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint"> question.changeEvent.on(function() {&lt;code&gt;} );</code>
</code></pre>
<p><strong>Example:</strong>
you have multi choice question with 5 answers, 3 should be selected. You want to change instruction to show remaining amount of answers. When 3 answers selected - navigate to next page.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">currentQuestion.changeEvent.on(function (questionModel) {
    var model = questionModel.model;
    var text = &apos;&apos;;

    switch (model.values.length) {
        case 0:
            text = &apos;Please select 3 items&apos;;
            break;
        case 1:
            text = &apos;You need to select 2 more&apos;;
            break;
        case 2:
            text = &apos;One more to go&apos;;
            break;
        case 3:
            Confirmit.page.next();
            return;
    }

    document.querySelector(`.cf-question#${model.id} .cf-question__instruction`).innerHTML = text;
});</code>
</code></pre>
<h3 id="validationevent">ValidationEvent</h3><p>Use validateEvent to apply custom client side validation.<br><strong>If you corrupt validation result object - client-side validation will stop working properly</strong><br>This event is triggered before displaying errors so custom errors added to validationResult will be displayed alongside with default validation errors if any exists.<br><strong>Example:</strong>
you have multi choice question. If you choose the first answer, the second must also be selected.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">currentQuestion.validationEvent.on(
  function (validationResult) {
    if (currentQuestion.values.indexOf(&apos;1&apos;) != -1
       &amp;&amp; currentQuestion.values.indexOf(&apos;2&apos;) == -1 ) {
      var error = {message: &apos;If the first answer is selected - the second is required&apos;};
      validationResult.errors.push(error);
    }  
});</code>
</code></pre>
<p>It&apos;s also possible to bind this validation message to second answer directly:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">currentQuestion.validationEvent.on(
  function (validationResult) {
    if (currentQuestion.values.indexOf(&apos;1&apos;) != -1
       &amp;&amp; currentQuestion.values.indexOf(&apos;2&apos;) == -1 ) {
      var error = {message: &apos;If the first answer is selected - the second is required&apos;};
      var errors= [];
      errors.push(error);
      var answerErrors = { answerCode : &apos;2&apos;, errors : errors};
      validationResult.answerValidationResults.push(answerErrors);
    }  
});</code>
</code></pre>
<h3 id="validationcompleteevent">ValidationCompleteEvent</h3><p>Use validationCompleteEvent to display final version of validation.<br><strong>If you corrupt validation result object - client-side validation will stop working properly</strong>  </p>
<h2 id="server-side-piping">Server side piping</h2><p>To pass information from server use regular ^^ piping.<br><strong>Example:</strong>
you have open text question. You need to know which answer was selected in the first question:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">Confirmit.pageView.initCompleteEvent.on(() =&gt; {
    var q1answer = &quot;^f(&apos;q1&apos;)^&quot;;
    currentQuestion.setValue(`I&apos;ve selected ${q1answer} for first question.`);
});</code>
</code></pre>
<h2 id="custom-question-experience">Custom question experience</h2><p>Set &apos;disable default rendering&apos; on question skin (see <em>Custom Questions</em> section).
Write js rendering your html and updating question model.</p>
<h3 id="custom-jquery-slider-example">Custom jQuery slider example</h3><p>Add jQuery and jQueryUI js files to question theme as external js files.</p>
<pre><code class="lang-log"><code class="source-code prettyprint">https://code.jquery.com/jquery-3.2.1.min.js,  https://code.jquery.com/ui/1.12.1/jquery-ui.min.js  </code>
</code></pre>
<p>Add the jQueryUI css file to the question theme as an external css file.</p>
<pre><code><code class="source-code prettyprint">https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css</code>
</code></pre><p>Code to put into JavaScript section:  </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">$(function() {
    var container = $(&apos;.cf-question[data-question-id=&apos; + currentQuestion.id + &apos;]&apos;);

    var sliderContainer = $(&apos;&lt;div class=&quot;single-slider&quot; style=&quot;max-width: 300px; margin: 20px;&quot;&gt;&lt;/div&gt;&apos;);
    container.append(sliderContainer);

    sliderContainer.slider({
        value: currentQuestion.value,
        min: 1,
        max: currentQuestion.answers.length,
        change: function( event, ui ) {
            currentQuestion.setValue(ui.value);
        }
    });

    currentQuestion.changeEvent.on(() =&gt; {
        sliderContainer.slider(&quot;value&quot;, currentQuestion.value);
        console.log(&apos;Single slider(&apos; + currentQuestion.id + &apos;) changed: value &apos; + currentQuestion.value + &apos;, other &apos; + currentQuestion.otherValue);
    });
});</code>
</code></pre>
</div>
</div>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>

<script src="script/jquery-3.2.1.min.js"></script>
<script src="script/bootstrap.min.js"></script>
</body>
</html>
